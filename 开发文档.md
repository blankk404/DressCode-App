# DressCode 穿搭App - 开发文档

## 项目概述
DressCode是一款基于MVVM架构的穿搭应用，使用Java语言开发，采用Room数据库实现本地数据存储。

## 技术栈
- **架构模式**: MVVM (Model-View-ViewModel)
- **编程语言**: Java
- **数据库**: Room (SQLite)
- **UI框架**: Material Design 3
- **依赖注入**: ViewModel + LiveData
- **视图绑定**: ViewBinding

## 项目结构

```
com.dresscode/
├── data/                          # 数据层
│   ├── entity/                    # 实体类
│   │   └── User.java             # 用户实体
│   ├── dao/                       # 数据访问对象
│   │   └── UserDao.java          # 用户DAO
│   ├── database/                  # 数据库
│   │   └── AppDatabase.java      # 应用数据库
│   └── repository/                # 数据仓库
│       └── UserRepository.java    # 用户仓库
├── viewmodel/                     # ViewModel层
│   └── UserViewModel.java         # 用户ViewModel
├── fragments/                     # Fragment
│   ├── HomeFragment.java          # 首页
│   ├── ClosetFragment.java        # 衣橱
│   ├── VirtualTryOnFragment.java  # 虚拟试衣
│   ├── InspirationFragment.java   # 灵感
│   └── CommunityFragment.java     # 社区
├── SplashActivity.java            # 启动页
├── LoginActivity.java             # 登录页
├── RegisterActivity.java          # 注册页
├── MainActivity.java              # 主页
└── ProfileActivity.java           # 个人中心
```

## 已完成功能

### 1. 用户系统
- ✅ 用户实体类（User Entity）
  - 用户名
  - 密码
  - 手机号
  - 昵称
  - 性别
  - 头像
  - 创建时间

### 2. 启动页（SplashActivity）
- ✅ 精美的渐变背景
- ✅ App Logo展示
- ✅ 产品名称"DressCode"
- ✅ 标语"开启你的穿搭之旅"
- ✅ 登录按钮
- ✅ 注册按钮

### 3. 登录功能（LoginActivity）
- ✅ 支持用户名登录
- ✅ 支持手机号登录
- ✅ 密码验证
- ✅ 输入验证
- ✅ 加载状态显示
- ✅ 登录成功后跳转主页
- ✅ 自动保存登录状态

### 4. 注册功能（RegisterActivity）
- ✅ 用户名注册
- ✅ 密码设置（含确认密码）
- ✅ 手机号绑定
- ✅ 昵称设置
- ✅ 性别选择（男/女/保密）
- ✅ 完整的输入验证
  - 用户名长度验证（至少3位）
  - 密码长度验证（至少6位）
  - 两次密码一致性验证
  - 手机号格式验证
- ✅ 用户名重复检查
- ✅ 手机号重复检查
- ✅ 注册成功后自动登录并跳转主页

### 5. MVVM架构实现
- ✅ **Model层**: User实体 + UserDao + AppDatabase
- ✅ **Repository层**: UserRepository（业务逻辑处理）
- ✅ **ViewModel层**: UserViewModel（UI与数据分离）
- ✅ **View层**: Activity + ViewBinding

### 6. 数据库设计
- ✅ Room数据库配置
- ✅ 用户表（users）设计
- ✅ DAO接口定义
- ✅ 异步数据操作

## 使用说明

### 运行项目
1. 使用Android Studio打开项目
2. 等待Gradle同步完成
3. 连接Android设备或启动模拟器
4. 点击Run按钮运行应用

### 测试流程
1. **首次启动**: 应用会显示启动页
2. **注册账号**: 
   - 点击"注册"按钮
   - 填写用户名、密码、手机号、昵称
   - 选择性别
   - 点击"注册"按钮
   - 注册成功后自动跳转到主页
3. **登录账号**:
   - 点击"登录"按钮
   - 输入用户名/手机号和密码
   - 点击"登录"按钮
   - 登录成功后跳转到主页

## 数据库表结构

### users表
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | INTEGER | 主键，自增 |
| username | TEXT | 用户名，唯一 |
| password | TEXT | 密码 |
| phone | TEXT | 手机号，唯一 |
| nickname | TEXT | 昵称 |
| gender | TEXT | 性别（男/女/保密） |
| avatar | TEXT | 头像路径 |
| created_at | INTEGER | 创建时间戳 |

## 核心功能说明

### 登录逻辑
1. 用户输入账号（用户名或手机号）和密码
2. ViewModel调用Repository的loginUser方法
3. Repository判断输入是手机号还是用户名
4. 调用相应的DAO方法查询数据库
5. 返回查询结果给ViewModel
6. ViewModel通过LiveData通知View更新UI
7. 登录成功后保存用户信息到SharedPreferences
8. 跳转到主页

### 注册逻辑
1. 用户填写注册信息
2. 前端进行输入验证（格式、长度等）
3. ViewModel调用Repository的registerUser方法
4. Repository检查用户名和手机号是否已存在
5. 如果不存在，插入新用户到数据库
6. 注册成功后自动保存登录状态
7. 跳转到主页

## 下一步开发计划

### 待开发功能
- [ ] 完善主页功能
- [ ] 衣橱管理功能
- [ ] 虚拟试衣功能
- [ ] 穿搭灵感功能
- [ ] 社区分享功能
- [ ] 个人中心完善
- [ ] 忘记密码功能
- [ ] 头像上传功能
- [ ] 用户信息编辑
- [ ] 退出登录功能

## 注意事项

1. **密码安全**: 当前密码以明文存储，生产环境需要加密处理
2. **数据验证**: 已实现基本的前端验证，后续可增强
3. **错误处理**: 已实现基本的错误提示，可进一步优化
4. **UI优化**: 当前UI已经美观，可根据需求继续调整

## 依赖库版本

```gradle
// Room数据库
implementation 'androidx.room:room-runtime:2.6.1'
annotationProcessor 'androidx.room:room-compiler:2.6.1'

// ViewModel和LiveData
implementation 'androidx.lifecycle:lifecycle-viewmodel:2.7.0'
implementation 'androidx.lifecycle:lifecycle-livedata:2.7.0'
implementation 'androidx.lifecycle:lifecycle-runtime:2.7.0'

// Material Design
implementation 'com.google.android.material:material:1.11.0'
```

## 构建信息
- **最低SDK版本**: 24 (Android 7.0)
- **目标SDK版本**: 34 (Android 14)
- **编译SDK版本**: 34
- **Java版本**: 1.8

---

**开发者**: DressCode Team  
**最后更新**: 2025-12-19

